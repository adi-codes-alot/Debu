<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Will You Be My Valentine?</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,400&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet"/>
<style>
  :root {
    --rose:      #e8405a;
    --rose-soft: #f5a0af;
    --cream:     #fff8f9;
    --text:      #3d2c2e;
    --shadow:    rgba(232,64,90,0.18);
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--cream);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
  }

  /* â”€â”€ floating petals â”€â”€ */
  .petal {
    position: fixed;
    background: var(--rose-soft);
    border-radius: 50% 0 50% 50%;
    opacity: 0.25;
    pointer-events: none;
    animation: fall linear infinite;
  }
  @keyframes fall {
    0%   { transform: translateY(-40px) rotate(0deg); }
    100% { transform: translateY(105vh) rotate(720deg); }
  }

  /* â”€â”€ card â”€â”€ */
  .card {
    position: relative;
    z-index: 1;
    background: white;
    border-radius: 28px;
    padding: 56px 60px 48px;
    width: 460px;
    max-width: 92vw;
    text-align: center;
    box-shadow: 0 24px 56px var(--shadow);
    animation: cardIn .6s cubic-bezier(.34,1.56,.64,1) both;
  }
  @keyframes cardIn {
    from { opacity:0; transform: scale(.88) translateY(24px); }
    to   { opacity:1; transform: scale(1)  translateY(0);     }
  }
  .card.hidden { display: none; }

  /* â”€â”€ typography â”€â”€ */
  .card h1 {
    font-family: 'Playfair Display', serif;
    font-size: 2rem;
    color: var(--text);
    line-height: 1.3;
  }
  .heart { display: inline-block; animation: pulse 1.2s ease-in-out infinite; }
  @keyframes pulse {
    0%,100% { transform: scale(1); }
    50%     { transform: scale(1.25); }
  }

  /* â”€â”€ button arena â”€â”€ */
  .btn-arena {
    position: relative;
    margin-top: 36px;
    width: 100%;
    height: 140px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
  }

  button {
    font-family: 'DM Sans', sans-serif;
    font-size: 1rem;
    font-weight: 500;
    border: none;
    border-radius: 999px;
    padding: 14px 38px;
    cursor: pointer;
    user-select: none;
    -webkit-user-select: none;
    transition: transform .15s, box-shadow .15s;
  }

  #yesBtn {
    background: var(--rose);
    color: #fff;
    box-shadow: 0 6px 20px var(--shadow);
    position: relative;
    z-index: 2;
  }
  #yesBtn:hover  { box-shadow: 0 8px 28px var(--shadow); transform: scale(1.06); }
  #yesBtn:active { transform: scale(.94); }

  /* No â€” starts in flow, JS switches to absolute */
  #noBtn {
    background: #ececec;
    color: #777;
    position: relative;
    z-index: 1;
    transition: left .22s cubic-bezier(.34,1.56,.64,1),
                top  .22s cubic-bezier(.34,1.56,.64,1);
  }
  #noBtn.abs { position: absolute; }

  /* invisible overlay that eats every pointer event aimed at No */
  #noOverlay {
    position: absolute;
    z-index: 10;
    background: transparent;
    cursor: default;
  }

  /* â”€â”€ yes card â”€â”€ */
  #yesCard h1 { font-size: 2.4rem; margin-bottom: 4px; }
  .valentine-text {
    font-size: 1rem;
    line-height: 1.75;
    color: #6b5455;
    margin-top: 12px;
  }

  /* â”€â”€ confetti â”€â”€ */
  #confetti { position:fixed; inset:0; pointer-events:none; z-index:0; }

  /* â”€â”€ mobile â”€â”€ */
  @media (max-width: 480px) {
    .card      { padding: 40px 24px 36px; }
    .btn-arena { height: 180px; }
  }
</style>
</head>
<body>

<canvas id="confetti"></canvas>

<!-- Screen 1 -->
<div class="card" id="questionCard">
  <h1>Will you be my Valentine? <span class="heart">ğŸ’–</span></h1>
  <div class="btn-arena" id="arena">
    <button id="yesBtn">Yes ğŸ’•</button>
    <button id="noBtn" tabindex="-1">No ğŸ˜</button>
  </div>
</div>

<!-- Screen 2 -->
<div class="card hidden" id="yesCard">
  <h1>ğŸ¥¹ğŸ’˜</h1>
  <p class="valentine-text">
    Okay wowâ€¦ you really said yes.<br><br>
    I didn't plan on finding someone this genuinely, but here we are.<br>
    Maybe it's a little fast, but it feels right, and that's enough for me.<br><br>
    Hi Valentine ğŸ’•<br>
    You just made my whole day.
  </p>
</div>

<script>
/* â”â”â” Petals â”â”â” */
(function(){
  for(let i=0;i<14;i++){
    const p=document.createElement('div');
    p.className='petal';
    const s=12+Math.random()*16;
    p.style.cssText=`width:${s}px;height:${s}px;left:${Math.random()*100}vw;top:${-Math.random()*200}px;animation-duration:${6+Math.random()*7}s;animation-delay:${-Math.random()*8}s;opacity:${0.12+Math.random()*0.2};`;
    document.body.appendChild(p);
  }
})();

/* â”â”â” No-button: flee + unclickable overlay â”â”â” */
(function(){
  const arena   = document.getElementById('arena');
  const yesBtn  = document.getElementById('yesBtn');
  const noBtn   = document.getElementById('noBtn');
  let  pinned   = false;

  /* create overlay */
  const overlay = document.createElement('div');
  overlay.id = 'noOverlay';
  arena.appendChild(overlay);

  /* pin both buttons absolute at current layout position (once) */
  function pinOnce(){
    if(pinned) return;
    const aR = arena.getBoundingClientRect();

    const yR = yesBtn.getBoundingClientRect();
    yesBtn.style.position = 'absolute';
    yesBtn.style.left = (yR.left - aR.left) + 'px';
    yesBtn.style.top  = (yR.top  - aR.top)  + 'px';

    const nR = noBtn.getBoundingClientRect();
    noBtn.classList.add('abs');
    noBtn.style.left = (nR.left - aR.left) + 'px';
    noBtn.style.top  = (nR.top  - aR.top)  + 'px';

    pinned = true;
  }

  /* move No to a random spot away from Yes */
  function flee(){
    pinOnce();
    const aR  = arena.getBoundingClientRect();
    const nR  = noBtn.getBoundingClientRect();
    const yR  = yesBtn.getBoundingClientRect();
    const maxX = aR.width  - nR.width;
    const maxY = aR.height - nR.height;
    const yCx  = yR.left - aR.left + yR.width/2;
    const yCy  = yR.top  - aR.top  + yR.height/2;

    let x, y, i=0;
    do {
      x = Math.random()*maxX;
      y = Math.random()*maxY;
      i++;
    } while(i<30 && Math.hypot((x+nR.width/2)-yCx,(y+nR.height/2)-yCy)<100);

    noBtn.style.left = x+'px';
    noBtn.style.top  = y+'px';

    // move overlay after a short delay so transition has started
    setTimeout(syncOverlay, 230);
  }

  /* keep overlay glued on top of noBtn */
  function syncOverlay(){
    const aR = arena.getBoundingClientRect();
    const nR = noBtn.getBoundingClientRect();
    overlay.style.left   = (nR.left - aR.left)+'px';
    overlay.style.top    = (nR.top  - aR.top) +'px';
    overlay.style.width  = nR.width +'px';
    overlay.style.height = nR.height+'px';
  }

  // initial overlay position (after first paint)
  requestAnimationFrame(syncOverlay);

  /* â”€â”€ overlay eats ALL input aimed at No â”€â”€ */
  overlay.addEventListener('pointerdown',  (e)=>{ e.preventDefault(); e.stopPropagation(); flee(); }, {passive:false});
  overlay.addEventListener('touchstart',   (e)=>{ e.preventDefault(); e.stopPropagation(); flee(); }, {passive:false});
  overlay.addEventListener('click',        (e)=>{ e.preventDefault(); e.stopPropagation(); });
  overlay.addEventListener('contextmenu',  (e)=>{ e.preventDefault(); });

  /* â”€â”€ desktop: flee when mouse hovers over No â”€â”€ */
  arena.addEventListener('pointermove', (e)=>{
    const nR = noBtn.getBoundingClientRect();
    if(e.clientX>=nR.left-8 && e.clientX<=nR.right+8 &&
       e.clientY>=nR.top-8  && e.clientY<=nR.bottom+8){
      flee();
    }
  });

  window.addEventListener('resize', syncOverlay);
})();

/* â”â”â” Yes â†’ confetti + screen swap â”â”â” */
(function(){
  const yesBtn       = document.getElementById('yesBtn');
  const questionCard = document.getElementById('questionCard');
  const yesCard      = document.getElementById('yesCard');
  const canvas       = document.getElementById('confetti');
  const ctx          = canvas.getContext('2d');

  yesBtn.addEventListener('pointerdown',(e)=>{
    e.preventDefault();
    questionCard.classList.add('hidden');
    yesCard.classList.remove('hidden');
    startConfetti();
  });

  /* confetti */
  let pieces=[],animId=null;
  const colours=['#e8405a','#f5a0af','#ff6b81','#fff','#ffd6dc','#c9364c'];
  function resize(){canvas.width=innerWidth;canvas.height=innerHeight;}
  window.addEventListener('resize',resize); resize();

  function Piece(x){
    this.x=x;this.y=-10;this.vx=(Math.random()-.5)*3;this.vy=2+Math.random()*3;
    this.rot=Math.random()*360;this.rv=(Math.random()-.5)*12;
    this.w=6+Math.random()*6;this.h=this.w*(.4+Math.random()*.4);
    this.color=colours[Math.random()*colours.length|0];this.life=1;
  }
  Piece.prototype.update=function(){this.y+=this.vy;this.x+=this.vx;this.rot+=this.rv;this.vy*=1.015;this.life-=.006;};
  Piece.prototype.draw=function(c){c.save();c.translate(this.x,this.y);c.rotate(this.rot*Math.PI/180);c.globalAlpha=this.life;c.fillStyle=this.color;c.fillRect(-this.w/2,-this.h/2,this.w,this.h);c.restore();};

  function startConfetti(){
    pieces=[];
    for(let i=0;i<120;i++)pieces.push(new Piece(Math.random()*canvas.width));
    if(animId)cancelAnimationFrame(animId);loop();
  }
  function loop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    if(Math.random()<.35)pieces.push(new Piece(Math.random()*canvas.width));
    for(let i=pieces.length-1;i>=0;i--){
      pieces[i].update();
      if(pieces[i].life<=0||pieces[i].y>canvas.height){pieces.splice(i,1);continue;}
      pieces[i].draw(ctx);
    }
    animId=requestAnimationFrame(loop);
  }
})();
</script>
</body>
</html>
